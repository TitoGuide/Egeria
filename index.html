<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Itinerary Builder</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#66b2ae">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="icon-192.png">
  <style>
    /* Beautified layout improvements */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 1.5em;
      background: #f0f4f5;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #005b63;
      margin-bottom: 1em;
    }

    label {
      font-weight: bold;
      margin-top: 1em;
      display: block;
    }

    input[type="text"], input[type="date"], .activity-input {
      width: 100%;
      padding: 0.7em;
      margin-top: 0.3em;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1em;
    }

    .date-group {
      display: flex;
      gap: 1em;
      flex-wrap: wrap;
      margin-top: 1em;
    }

    .date-wrapper {
      flex: 1;
      min-width: 120px;
    }

    .readonly-field {
      height: 40px;
      padding: 0.5em;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #e9ecef;
      text-align: center;
      font-weight: bold;
    }

    .day {
      background: #ffffff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 1em;
      margin-top: 1.5em;
    }

    .day h3 {
      margin-top: 0;
    }

    .day-buttons {
      display: flex;
      gap: 1em;
      margin-top: 1em;
    }

    .day-buttons button, #shareButton {
      flex: 1;
      padding: 0.75em;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      color: white;
      background-color: #007aff;
      cursor: pointer;
    }

    .day-buttons button:last-child {
      background-color: #28a745; /* green for Summarize */
    }

    #output {
      white-space: pre-wrap;
      background: #ffffff;
      border: 1px solid #ccc;
      padding: 1em;
      margin-top: 2em;
      border-radius: 8px;
      font-family: monospace;
      font-size: 1em;
    }

    .error-box {
      background: #ffe5e5;
      color: #990000;
      padding: 1em;
      border: 1px solid #cc0000;
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
      margin-top: 1em;
    }

    /* Modal styling */
    #modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    #modalContent {
      background: white;
      padding: 2em 1em 1em;
      border-radius: 8px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }

    #modalTitle {
      font-size: 1.2em;
      font-weight: bold;
      background: #f5f5f5;
      color: #333;
      border: none;
      padding: 0.8em;
      width: 100%;
      border-radius: 6px;
      cursor: pointer;
      margin-bottom: 1em;
    }

    #modalItems span {
      display: inline-block;
      background: #e0f7fa;
      color: #007aff;
      padding: 0.5em 0.75em;
      margin: 0.25em;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
    }

    #modalItems span.selected {
      background: #007aff;
      color: white;
      font-weight: bold;
    }

    #modalItems h4 {
      margin: 1em 0 0.5em;
      font-size: 1em;
    }

    #modalItems h4.has-items {
      color: #0051cc;
    }

    #modalItems h4.no-items {
      color: #666;
    }
  </style>
</head>

<body>
  <h1>Itinerary Builder</h1>

  <label for="tourName">Tour Name:</label>
  <input id="tourName" type="text" placeholder="e.g. Bible Tours">

  <div class="date-group">
    <div class="date-wrapper">
      <label for="startDate">Start Date:</label>
      <input id="startDate" type="date" onchange="updateDayCount()">
    </div>
    <div class="date-wrapper">
      <label for="endDate">End Date:</label>
      <input id="endDate" type="date" onchange="updateDayCount()">
    </div>
    <div class="date-wrapper">
      <label>Days:</label>
      <div id="dayCount" class="readonly-field">—</div>
    </div>
  </div>

  <div id="daysContainer"></div>

  <pre id="output">
✨ How to Use the Itinerary Builder

1. Enter the tour name.
2. Select a start and end date (1–30 days range).
- The first day window will open.
3. Optional: Add a title next to each date.
4. Tap "+ Add Activity" to choose or type site names.
- When finished, tap Accept Selection.
5. Tap "Next Day" to continue.
6. Tap "Summarize" to preview the final itinerary.
7. Tap "Share or Save" to export via Notes, WhatsApp, Email, etc.

⚠️ Changing start/end dates will reset all day entries.
  </pre>

  <div style="text-align: center; margin-top: 2em;">
    <button id="shareButton" style="display:none; min-width: 200px;">Share or Save Itinerary</button>
  </div>

  <div id="modal">
    <div id="modalContent">
      <button id="modalTitle">Select Activities</button>
      <div id="modalItems"></div>
    </div>
  </div>

  <!-- Your script should go here -->
  <script src="main.js"></script>
</body>

</html>
